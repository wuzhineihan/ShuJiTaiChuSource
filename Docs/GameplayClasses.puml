@startuml GameplayClasses

skinparam classAttributeIconSize 0

package "Source/VRTest (C++)" {
    class ACharacter
    interface IAISightTargetInterface

    class ACLM_Character {
        +bool bIsInGrass
        +CanBeSeenFrom()
    }

    ACharacter <|-- ACLM_Character
    IAISightTargetInterface <|.. ACLM_Character
}

package "VRGamePlay (Blueprint)" {
    class BP_VRPawn {
        +int PlayerHealth
        +bool IsClimbing
        +bool IsDrawing
        +bool BowInBackPack
        +BP_DrawManager_C DrawManager
        +BP_SkillReleaseManager_C SkillReleaseManager
        +BP_MyMotionController_C MyMotionControllerLeft
        +BP_MyMotionController_C MyMotionControllerRight
        +ToggleMenu()
        +StarDrawStart()
        +StarDrawFinish()
    }

    class BP_VRPlayerState {
        +Map<E_Skill, bool> SkillLearnedMap
        +int Magic
        +int ArrowNumber
        +LearnSkill()
    }

    class BP_MyMotionController {
        +bool IsHolding
        +BP_MyGrabComponent_C HeldComponent
        +MotionControllerGrabEvent()
        +MotionControllerReleaseEvent()
    }

    class BP_MyGrabComponent {
        +OnGrab()
        +OnRelease()
    }

    class BP_DrawManager {
        +Vector FingerPointLocation
        +BP_MainStar_C[] MainStars
        +UpdateStarTrail()
        +FinishDraw()
    }

    class BP_SkillReleaseManager {
        +ActivateSkill()
        +EagleEye()
        +Shield()
        +Invisible()
    }

    class BP_ClimbableVolume {
        +OnGrab()
        +OnRelease()
        +Tick()
    }

    class BP_WeaponParent {
        +E_WeaponType WeaponType
    }

    class BP_Bow {
        +SpawnArrow()
        +SpringSolve()
    }

    class BP_Arrow {
        +E_ArrowState ArrowState
        +bool OnFire
        +EnterFireState()
    }

    class BP_StasisPoint {
        +EnterTrackMode()
        +EnterFollowingMode()
    }

    class BP_SaveManager {
        +SaveGame()
        +LoadGame()
    }

    class BP_BeginnersGuideManager {
        +ButtonStartFlickering()
    }

    interface BPI_CustomGrabAndRelease {
        +OnGrab()
        +OnRelease()
    }

    interface BPI_TakeDamage_New {
        +TakeDamage()
    }

    interface BPI_Stasisable {
        +EnterStasis()
        +ExitStasis()
    }

    ACLM_Character <|-- BP_VRPawn
    BP_VRPawn *-- BP_MyMotionController : Left/Right Hand
    BP_VRPawn *-- BP_DrawManager : Owns
    BP_VRPawn *-- BP_SkillReleaseManager : Owns
    
    BP_MyMotionController o-- BP_MyGrabComponent : Interacts with
    
    BP_ClimbableVolume ..|> BPI_CustomGrabAndRelease
    BP_ClimbableVolume --> BP_VRPawn : Moves Player
    
    BP_DrawManager --> BP_MyMotionController : Tracks Hand

    BP_WeaponParent <|-- BP_Bow
    BP_WeaponParent <|-- BP_Arrow
    BP_Bow ..> BP_Arrow : Spawns
    BP_Bow ..|> BPI_CustomGrabAndRelease
    BP_Arrow ..|> BPI_CustomGrabAndRelease
    BP_Arrow ..|> BPI_TakeDamage_New

    BP_StasisPoint ..|> BPI_Stasisable
    BP_StasisPoint ..|> BPI_CustomGrabAndRelease
}

@enduml
