
所有需要被抓取的物体都有一个GrabComponent，玩家抓取时通过Overlap检测手的附近是否有含有GrabComponent的Actor，并调用GrabComponent里的逻辑对其进行抓取。
这种做法的问题在于，它将属于物体的抓取属性和属于Player的抓取逻辑混淆在一起了。我的重构思路是分离属于Player的逻辑属性与属于被抓取物体的逻辑与属性（分离Grabber和Grabbee）。并将一些基本的逻辑写到c++而不是蓝图里。
此外，在旧设计当中，我将属于“手”的逻辑与属性写到了继承自MotionController的BP_MyMotionController里面，这种思路在仅VR的情况下没啥问题，但倘若引入PC第一人称模式，就需要修改这种实现。因为MotionController提供了追踪VR手柄位置的功能，而PC模式并不需要这种功能。
对此我的重构思路是，自建一个PlayerHand组件类，在功能上完全取代BP_MyMotionController，弃用BP_MyMotionController。在旧设计里，BP_MyMotionController在DirectGrab里调用GrabComponent里的抓取逻辑（Try Grab）。但在新设计里，我们可以直接将Try Grab的逻辑写在PlayerHand里。
同时创建GrabbeeObject：Actor，是所有能被抓取的物体的基类。里面除了存储Grabbee的属性之外，还有两个可被子类重写的函数OnGrab和OnRelease。

原先GrabEvent的逻辑不是很清晰，在新设计当中，我们可以将整个抓取过程分为Validate，FindTarget和GrabObject三步。
- Validate：确保此时Hand能抓取，对CanGrab，IsHolding进行校验。
- FindTarget：找到要抓取的物体。若Hand.InBackPack == true，则根据背包规则获取弓或者箭。反之，则进行重叠检测，找到要抓取的物体，对于PC来说，是通过从摄像机中心发出射线Trace来检测。对VR来说是通过Sphere Trace检测在Hand周围是否有能被抓取的物体（可以参考旧的蓝图实现）。
- GrabObject：对FindTarget获取到的物体进行抓取操作，逻辑类似于旧设计BP_MyMotionController里的DirectlyGrab。

ReleaseEvent的设计也是同理。

总结来说，重构是将原先存在BP_MyMotionController和GrabComponent里的属于Grabber的抓取逻辑/属性转移到PlayerHand里，将原先存在于GrabComponent里面的属于Grabbee的逻辑/属性转移到GrabbeeObject里。

不管是PCPlayer还是VRPlayer，都有两个PlayerHand组件，分别代表左手和右手。
在VRPlayer里使用两个MotionController仅用作位置追踪，将两个PlayerHand分别attach到MotionControllerLeft和MotionControllerRight上。
在PCPlayer里将使用程序化的方法操纵PlayerHand，从而模拟VR的各种操作，比如拉弓，这部分逻辑可以先不在C++实现，在涉及到相关交互逻辑的时候放到蓝图里或者C++里实现。

为了更方便的在C++里写PCPlayer和VRPlayer各自有分别的逻辑，我们可以为PCPlayer和VRPlayer分别建立C++父类，皆继承自BasePlayer，叫做BasePCPlayer和BaseVRPlayer。他们的组件结构如下：
- BasePCPlayer：在BasePlayer的基础上，给根组件上面加一个FirstPersonCamera。和两个PCGrabHand。
- VRPlayer：在BasePlayer的基础上，给
由于PCPlayer和VRPlayer在某些抓取逻辑上略有不同（如FindTarget一个是球形检测，一个是射线检测，在未来可能还会有更多的不同），因此我们需要为PC和VRPlayer分别继承各自的GrabHand子类（PCGrabHand和VRGrabHand），并放置到对应的C++类里去（BasePCPlayer和BaseVRPlayer）。

在此之上，还需要修改一下我们先前写过的InventoryComponent，将其引用的Actor基类都改为GrabeeObject，这样更符合语义。